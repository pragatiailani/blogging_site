<%- include("./partials/head.ejs") %>
<div class="container mt-4">
    <h1><%- locals.blog.title %></h1>
    <img
        src="<%- locals.blog.coverImageURL %>"
        alt="blog cover image"
        width="700px"
    />
    <!-- <pre class="mt-3"><%- //locals.blog.content %></pre> -->
    <p class="mt-3"><%- locals.blog.content %></p>
    <%- //JSON.stringify(locals.blog) %>
</div>

<div class="container mt-4">
    <img src="<%- blog.createdBy.profileImageURL %>" alt="" width="50px" />
    <%- blog.createdBy.fullName %>
</div>

<div class="container my-5">
    <h3>Comments (<%- comments.length %>)</h3>
    <% if (locals.user) { %>
    <form action="/comment/<%- blog.id %>" method="POST">
        <div class="mb-3">
            <input
                type="text"
                name="content"
                class="form-control"
                placeholder="Enter your comment"
            />
        </div>
        <button type="submit" class="btn btn-sm btn-primary">Submit</button>
    </form>
    <% } else{ %> 
        <div class="alert alert-secondary" role="alert">Sign in to comment</div>
    <% } %> 
    <% locals.comments.forEach((comment) => { %>
    <div class="card mt-3">
        <div class="card-body">
            <img src="<%- comment.createdBy.profileImageURL %>" width="30px" />
            <%- comment.createdBy.fullName %>
            <p class="mt-2"><%- comment.content %></p>
        </div>
    </div>
    <% }) %>
</div>
<%- include("./partials/scripts.ejs") %>
